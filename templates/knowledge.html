<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/knowledge.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>ãƒ†ã‚¹ãƒˆWebã‚¢ãƒ—ãƒª</title>
</head>
<body>

    <main>
        <!-- ã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        {% if arrange_list %}
        <h1>ğŸ³ ã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”ä¸€è¦§</h1>
        <div class="textBox" style="margin-bottom: 30px;">
            <div class="arrange-list-container" id="recipe-list-container">
                {% for item in arrange_list %}
                <div class="knowledge-item recipe-item" data-title="{{ item.item_name }}ã®ã‚¢ãƒ¬ãƒ³ã‚¸" data-content="{{ item.recipe }}">
                    <span class="title">{{ item.item_name }}</span> 
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="text-align: center; padding: 20px; color: #666; margin-bottom: 30px;">
            <p>ğŸ“ ã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</p>
            <p style="font-size: 0.9em;">ã€Œå…¥åŠ›ã€ãƒšãƒ¼ã‚¸ã‹ã‚‰æ®‹ã£ãŸé£Ÿæã‚’ç™»éŒ²ã™ã‚‹ã¨ã€AIãŒã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”ã‚’ææ¡ˆã—ã¾ã™</p>
        </div>
        {% endif %}
        
        <h1>è±†çŸ¥è­˜</h1>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="æ–™ç†">æ–™ç†</button>
            <button class="filter-btn" data-filter="æƒé™¤">æƒé™¤</button>
            <button class="filter-btn" data-filter="å¯é£Ÿéƒ¨">å¯é£Ÿéƒ¨</button>
            <button class="filter-btn" data-filter="ãã®ä»–">ãã®ä»–</button>
            <button class="filter-btn" data-filter="å…¨ã¦">å…¨ã¦è¡¨ç¤º</button>
        </div>

        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="knowledge-search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ï¼ˆä¾‹ï¼šåµã€çš®ï¼‰" />
        </div>
        
        <div class="textBox">
            <div class="knowledge-list-container" id="knowledge-list-container-trivia">
                {% for item in knowledge_list %}
                <div class="knowledge-item" data-target="detail-{{ item.id }}" data-category="{{ item.filter_group }}">
                    {% if item.category %}
                    <span class="title">{{ item.category }}</span> 
                    {% else %}
                    <span class="title">{{ item.title }}</span> 
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </main>

    {% for item in knowledge_list %}
    <div id="detail-{{ item.id }}" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="modal-header category-{{ item.filter_group }}">
                {{ item.filter_group }}
            </div>
            <div class="modal-body">
                {% if item.category %}
                <h2>å»ƒæ£„éƒ¨åˆ†ï¼š{{ item.category }}</h2>
                <h3>å†åˆ©ç”¨æ–¹æ³•ï¼š{{ item.title }}</h3> 
                <p>{{ item.content }}</p> 
                {% else %}
                <h2>{{ item.title }}</h2> 
                <p>{{ item.content }}</p> 
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- ã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”ç”¨ã®å‹•çš„ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="recipe-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="modal-header" style="background-color: #20b2aa; color: white;">
                ğŸ³ <span id="recipe-modal-title">ã‚¢ãƒ¬ãƒ³ã‚¸ãƒ¬ã‚·ãƒ”</span>
            </div>
            <div class="modal-body">
                <pre id="recipe-modal-content" style="white-space: pre-wrap; font-family: inherit; line-height: 1.6; margin: 0;"></pre>
            </div>
        </div>
    </div>

    {% include 'footer.html' %}

    <script src="{{ url_for('static', filename='js/knowledge.js') }}"></script>
</body>
</html>